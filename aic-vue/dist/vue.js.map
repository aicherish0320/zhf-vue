{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/observe/dep.js","../src/utils.js","../src/observe/scheduler.js","../src/observe/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["function genProps(attrs) {\n  let str = ''\n  // { key: value, key: value }\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i]\n\n    if (attr.name === 'style') {\n      let styles = {}\n      attr.value.replace(/([^;:]+):([^;:]+)/g, function () {\n        styles[arguments[1].trim()] = arguments[2].trim()\n      })\n      attr.value = styles\n    }\n\n    str += `${attr.name}:${JSON.stringify(attr.value)},`\n  }\n  return `{${str.slice(0, -1)}}`\n}\n\nfunction gen(el) {\n  const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\n  if (el.type === 1) {\n    // 如果是元素就递归生成\n    return generate(el)\n  } else {\n    let text = el.text\n    // 说明是普通文本\n    if (!defaultTagRE.test(text)) {\n      return `_v('${text}')`\n    }\n    // <div>aa {{ name }} bb</div>\n    // 说明有表达式。需要做一个表达式和普通值的拼接 _v('aaa', _s(name), 'bbb')\n    let lastIndex = (defaultTagRE.lastIndex = 0)\n    let tokens = []\n    let match\n    // 如果正则 + g，lastIndex\n    while ((match = defaultTagRE.exec(text))) {\n      let index = match.index\n      if (index > lastIndex) {\n        tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n      }\n      tokens.push(`_s(${match[1].trim()})`)\n      lastIndex = index + match[0].length\n    }\n\n    if (lastIndex < text.length) {\n      tokens.push(JSON.stringify(text.slice(lastIndex)))\n    }\n\n    return `_v(${tokens.join('+')})`\n  }\n}\n\nfunction genChildren(el) {\n  let children = el.children\n  if (children) {\n    return children.map((item) => gen(item)).join(',')\n  }\n  return false\n}\n\nexport function generate(ast) {\n  let children = genChildren(ast)\n  let code = `_c('${ast.tag}', ${\n    ast.attrs.length ? genProps(ast.attrs) : undefined\n  }${children ? `,${children}` : ''})`\n\n  return code\n}\n","export function parseHTML(html) {\n  // 正则\n  const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*` // 匹配标签名\n  const qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\n  const startTagOpen = new RegExp(`^<${qnameCapture}`) // 匹配标签名\n  const endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) // 匹配标签结束 </aa>\n  const attribute =\n    /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ // 匹配属性\n  const startTagClose = /^\\s*(\\/?)>/ // 匹配结束标签 > />\n  // 构建父子关系\n  let stack = []\n  let root = null\n\n  function createASTElement(tag, attrs, parent = null) {\n    return {\n      tag,\n      type: 1,\n      children: [],\n      parent,\n      attrs\n    }\n  }\n  function start(tag, attrs) {\n    // 遇到开始标签，就取栈中的最后一个 作为父级\n    const parent = stack[stack.length - 1]\n    let element = createASTElement(tag, attrs, parent)\n    // 说明当前节点就是根节点\n    if (root === null) {\n      root = element\n    }\n    if (parent) {\n      // 更新父级节点\n      element.parent = parent\n      parent.children.push(element)\n    }\n\n    stack.push(element)\n  }\n  function end(tag) {\n    const endTag = stack.pop()\n    if (endTag.tag !== tag) {\n      console.log('标签出错了')\n    }\n  }\n  function text(chars) {\n    const parent = stack[stack.length - 1]\n    chars = chars.replace(/\\s/g, '')\n    if (chars) {\n      parent.children.push({\n        type: 2,\n        text: chars\n      })\n    }\n  }\n\n  function advance(len) {\n    html = html.substring(len)\n  }\n\n  function parseStartTag() {\n    const startMatch = html.match(startTagOpen)\n    if (startMatch) {\n      const match = {\n        tagName: startMatch[1],\n        attrs: []\n      }\n      advance(startMatch[0].length)\n      // 匹配属性 1. 要有属性，2.不能为开始的结束标签\n      let end, attr\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5]\n        })\n        advance(attr[0].length)\n      }\n      if (end) {\n        advance(end[0].length)\n      }\n      return match\n    }\n    return false\n  }\n\n  // 不停的截取模板，直到把模板全部解析完毕\n  while (html) {\n    // 解析 标签和文本\n    let index = html.indexOf('<')\n    if (index === 0) {\n      // 标签 解析开始标签 并且把属性也解析出来\n      const startTagMatch = parseStartTag()\n\n      if (startTagMatch) {\n        // 开始标签\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n      let endTagMatch\n      if ((endTagMatch = html.match(endTag))) {\n        // 结束标签\n        end(endTagMatch[1])\n        advance(endTagMatch[0].length)\n        continue\n      }\n\n      break\n    }\n    // 文本\n    if (index > 0) {\n      let chars = html.substring(0, index)\n      text(chars)\n      advance(chars.length)\n    }\n  }\n  return root\n}\n","import { generate } from './generate'\nimport { parseHTML } from './parser'\n\nexport function compileToFunction(template) {\n  // 1. 将模板编程 ast 语法树\n  const ast = parseHTML(template)\n  // 2. 代码优化 编辑静态节点\n  // TODO\n  // 3. 代码生成\n  const code = generate(ast)\n  // 模板引擎的实现原理都是 new Function + with\n  const render = new Function(`with(this){return ${code}}`)\n  return render\n}\n","let id = 0\n\nclass Dep {\n  // 把 watcher 放到 dep 中\n  constructor() {\n    this.subs = []\n    this.id = id++\n  }\n  depend() {\n    // 让 dep 记住这个 watcher\n    // this.subs.push(Dep.target)\n    Dep.target.addDep(this)\n  }\n  addSub(watcher) {\n    // 让 dep 记住 watcher\n    this.subs.push(watcher)\n  }\n  notify() {\n    this.subs.forEach((w) => w.update())\n  }\n}\n\n// 这里用了一个全局的变量\nDep.target = null\n\nexport default Dep\n","export function isFunction(data) {\n  return typeof data === 'function'\n}\n\nexport function isObject(val) {\n  return typeof val === 'object' && val !== null\n}\n\nexport function isArray(val) {\n  return Array.isArray(val)\n}\n\nlet callbacks = []\nlet waiting = false\n\nfunction flushCallbacks() {\n  callbacks.forEach((fn) => fn())\n  callbacks = []\n  waiting = false\n}\n\nexport function nextTick(fn) {\n  // Vue3里面的nextTick 就是 promise ,Vue2里面做了一些兼容处理\n  callbacks.push(fn)\n  if (!waiting) {\n    Promise.resolve().then(flushCallbacks)\n    waiting = true\n  }\n}\n","import { nextTick } from '../utils'\n\n// 这里存放要更新的 watcher\nlet queue = []\n// 用来存放已有的 watcher 的 id\nlet has = {}\n\nlet pending = false\n\nfunction flushSchedulerQueue() {\n  queue.forEach((watcher) => watcher.run())\n  queue = []\n  has = {}\n  pending = false\n}\n\nexport function queueWatcher(watcher) {\n  const id = watcher.id\n  if (!has[id]) {\n    has[id] = true\n    queue.push(watcher)\n\n    if (!pending) {\n      nextTick(flushSchedulerQueue)\n      pending = true\n    }\n  }\n}\n","import Dep from './dep'\nimport { queueWatcher } from './scheduler'\nlet id = 0\nclass Watcher {\n  // 要将 dep 放到 watcher 中\n  constructor(vm, fn, cb, options) {\n    this.vm = vm\n    this.fn = fn\n    this.cb = cb\n    this.options = options\n\n    this.id = id++\n\n    this.depsId = new Set()\n    this.deps = []\n    // fn 就是页面渲染逻辑\n    this.getters = fn\n    // 表示一上来就做一次初始化\n    this.get()\n  }\n  get() {\n    // 利用了 js 单线程特性\n    Dep.target = this\n    // 页面渲染的逻辑\n    this.getters()\n    Dep.target = null\n  }\n  addDep(dep) {\n    const dId = dep.id\n\n    if (!this.depsId.has(dId)) {\n      this.depsId.add(dId)\n      this.deps.push(dep)\n\n      dep.addSub(this)\n    }\n  }\n  update() {\n    // 每次更新数据都会同步调用这个 update 方法，我可以将更新的逻辑缓存起来，等会同步更新数据的逻辑执行完毕后，依次调用。（去重逻辑）\n    // 可以做异步更新处理\n    queueWatcher(this)\n    // this.get()\n  }\n  run() {\n    this.get()\n  }\n}\n\nexport default Watcher\n","export function patch(el, vnode) {\n  // 根据虚拟节点 渲染成真实节点\n  const elm = createElm(vnode)\n  const parentNode = el.parentNode\n  parentNode.insertBefore(elm, el.nextSibling)\n  parentNode.removeChild(el)\n  // 删除老节点 根据 vnode 创建新节点 替换掉老节点\n  return elm\n}\n// 面试问：虚拟节点的实现 虚拟节点 -> 真实节点\nfunction createElm(vnode) {\n  const { tag, data, children, text, vm } = vnode\n  // 让虚拟节点和真实节点做一个映射，后续某个虚拟节点更新了 我们可以跟踪到真实节点，并且更新真实节点\n  if (typeof tag === 'string') {\n    vnode.el = document.createElement(tag)\n    updateProperties(vnode.el, data)\n    children.forEach((child) => {\n      vnode.el.appendChild(createElm(child))\n    })\n  } else {\n    // 文本\n    vnode.el = document.createTextNode(text)\n  }\n  return vnode.el\n}\n\nfunction updateProperties(el, props = {}) {\n  for (let key in props) {\n    el.setAttribute(key, props[key])\n  }\n}\n","import Watcher from './observe/watcher'\nimport { patch } from './vdom/patch'\n\nexport function mountComponent(vm) {\n  const updateComponent = () => {\n    vm._update(vm._render())\n  }\n  // 每个组件 都有一个 watcher，我们把这个 watcher 称之为渲染 watcher\n  new Watcher(\n    vm,\n    updateComponent,\n    () => {\n      console.log('后续添加更新钩子函数 update')\n    },\n    true\n  )\n}\n\nexport function lifecycleMixin(vue) {\n  vue.prototype._update = function (vnode) {\n    // 采用的是 先序深度遍历 创建节点 （遇到节点就创造节点，递归创建）\n    const vm = this\n\n    vm.$el = patch(vm.$el, vnode)\n  }\n}\n","// 获取数组的老的原型方法\nconst oldArrayPrototype = Array.prototype\n// 让 arrayMethods 通过 __proto__ 能获取到数组的方法\nexport const arrayMethods = Object.create(oldArrayPrototype)\n// 只有这7个方法可以导致数组发生变化\nconst methods = ['push', 'pop', 'unshift', 'reverse', 'sort', 'splice', 'shift']\n\nmethods.forEach((method) => {\n  // 属性的查找，是先找自己身上的，找不到去原型上查找\n  arrayMethods[method] = function (...args) {\n    // 数组新增的属性 要看一下是不是对象 如果是对象 则继续进行劫持\n    // 需要调用数组原生逻辑\n    oldArrayPrototype[method].call(this, ...args)\n    // TODO... 可以添加自己的逻辑 函数劫持 切片\n    let inserted = null\n    let ob = this.__ob__\n    switch (method) {\n      // 修改 删除 添加\n      case 'splice':\n        inserted = args.slice(2) // splice 方法从第三个参数起 是添加的新数据\n        break\n      case 'push':\n      case 'unshift':\n        // 调用 push/unshift 传递的参数就是新增的逻辑\n        inserted = args\n        break\n    }\n    // inserted 遍历数组，看一个它是否需要进行再次劫持\n    if (inserted) {\n      ob.observeArray(inserted)\n    }\n    ob.dep.notify()\n  }\n})\n","import { isArray, isObject } from '../utils'\nimport { arrayMethods } from './array'\nimport Dep from './dep'\n\nclass Observer {\n  constructor(value) {\n    // 每一个 value 身上有一个 Observer，每个 Observer 都有一个 dep\n    // 如果给一个对象添加一个不存在的属性，我希望也能更新视图 {}.dep => watcher $set\n    // 给 对象和数组 添加 dep 属性\n    this.dep = new Dep() // value 是对象和数组 value.__ob__.dep\n    // 给对象和数组添加一个自定义属性\n    Object.defineProperty(value, '__ob__', {\n      enumerable: false,\n      value: this\n    })\n    if (isArray(value)) {\n      // 更改数组原型方法\n      value.__proto__ = arrayMethods\n      this.observeArray(value)\n    } else {\n      // 核心就是循环对象\n      this.walk(value)\n    }\n  }\n  // 递归遍历数组，对数组内部的对象再次重写\n  observeArray(data) {\n    // 数组里面如果是引用类型那么是响应式的\n    data.forEach((item) => observe(item))\n  }\n\n  walk(data) {\n    Object.keys(data).forEach((key) => {\n      // 使用 defineProperty 重新定义\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n// 让数组里的引用类型都收集依赖\n// JSON.stringify 默认会取 对象中的属性 进行一次收集 { foo: { bar: 'bar' } }\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    const current = value[i]\n    current.__ob__ && current.__ob__.dep.depend()\n\n    if (Array.isArray(current)) {\n      dependArray(current)\n    }\n  }\n}\n/*\n  性能优化的原则\n    1. 不要把所有的数据都放在 data 中\n    2. 不要写数据的时候，层次过深；尽量扁平化数据\n    3. 不要频繁获取数据\n    4. 数据不需要响应式，可以使用 Object.freeze 冻结属性\n*/\nfunction defineReactive(obj, key, value) {\n  // childOb 如果有值 那么就是数组或者对象\n  let childOb = observe(value)\n\n  // 每个属性对应一个 dep\n  const dep = new Dep()\n\n  Object.defineProperty(obj, key, {\n    get() {\n      if (Dep.target) {\n        // 对象本身收集\n        dep.depend()\n\n        // 取属性的时候，会对对象本身和数组进行依赖收集\n        // 数组和对象在这都会进行依赖收集\n        // 对象属性收集\n        if (childOb) {\n          childOb.dep.depend()\n          if (Array.isArray(value)) {\n            // 可能是数组套数组\n            dependArray(value)\n          }\n        }\n      }\n\n      // console.log('get >>> ', key, value)\n      // 闭包，value 会向上层查找\n      return value\n    },\n    set(newVal) {\n      if (value !== newVal) {\n        // console.log('set >>> ', key, newVal)\n        observe(newVal)\n        value = newVal\n        // 拿到当前的 dep 里面的 watcher 依次执行\n        dep.notify()\n      }\n    }\n  })\n}\n\nexport function observe(value) {\n  // 如果 value 不是对象，那么就不用观察了\n  if (!isObject(value)) {\n    return\n  }\n\n  // 一个对象不需要重新被观测\n  if (value.__ob__) {\n    return\n  }\n\n  // 需要对对象进行观测 （最外层必须是一个 {}， 不能是数组）\n  // 如果一个数据已经被观测过了，就不要再进行观测了，用类来实现，观测过了就增加一个标识\n  // 在观测的时候，可以先检测是否观测过了，如果观测过了就跳过检测\n  return new Observer(value)\n}\n","import { observe } from './observe'\nimport { isFunction } from './utils'\n\nexport function initState(vm) {\n  const opts = vm.$options\n  if (opts.data) {\n    initData(vm)\n  }\n}\n\nfunction initData(vm) {\n  // 用户传入的数据\n  let data = vm.$options.data\n  // 如果用户传递的是一个函数 则取函数的返回值作为data\n  // 只有根实例的data可以一个对象\n  // 需要将 data 变成响应式的 `Object.defineProperty`，重写 `data` 中的所有属性\n  vm._data = data = isFunction(data) ? data.call(vm) : data\n\n  observe(data)\n\n  for (const key in data) {\n    proxy(vm, key, '_data')\n  }\n}\n// 将数据代理带 vm 上\n// 取值的时候做代理，不是暴力的把 _data 属性赋予给 vm，而且直接赋值会有命名冲突问题\nfunction proxy(vm, key, source) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newVal) {\n      vm[source][key] = newVal\n    }\n  })\n}\n","import { compileToFunction } from './compiler'\nimport { mountComponent } from './lifecycle'\nimport { initState } from './state'\nimport { nextTick } from './utils'\n\nexport function initMixin(Vue) {\n  // 后续组件化开发的时候 Vue.extend 可以创造一个子组件，子组件可以继承 Vue，子组件也可以调用\n  // _init 方法\n  Vue.prototype._init = function (options) {\n    const vm = this\n    // 把用户的选项放到 vm 上，这样在其他方法中都可以获取到 options\n    // 为了后续扩展的方法，都可以获取 $options 选项\n    vm.$options = options\n\n    initState(vm)\n\n    if (vm.$options.el) {\n      // 要将数据挂载到页面上\n      // 数据变化需要更新视图，diff 算法更新需要更新的部分\n      // vue -> template（写起来更方便）\n      // vue3 -> template 写起来性能会更高，内部做了很多优化\n      // template -> ast 语法树（用来描述语法的，虚拟 DOM 描述 DOM 节点）-> 描述成一个树结构 -> 将代码重组成 JS 语法\n      // 模板编译原理：把template模板编译成 render 函数，render 函数返回 虚拟DOM -> diff 算法对比虚拟DOM\n      // ast -> render -> vNode -> 真实DOM\n      // 更新的时候 再次调用 render 生成新的vNode -> 新旧比对 -> 更新真实DOM\n      vm.$mount(vm.$options.el)\n    }\n  }\n  Vue.prototype.$mount = function (el) {\n    const vm = this\n    const opts = vm.$options\n    // 获取真实的元素\n    el = document.querySelector(el)\n    // 页面真实元素\n    vm.$el = el\n\n    if (!opts.render) {\n      // 模板编译\n      let template = opts.template\n      if (!template) {\n        template = el.outerHTML\n      }\n\n      let render = compileToFunction(template)\n      opts.render = render\n    }\n    mountComponent(vm)\n  }\n  Vue.prototype.$nextTick = nextTick\n}\n","// 返回虚拟节点\nexport function createElement(vm, tag, data = {}, ...children) {\n  return vnode(vm, tag, data, children, data.key, undefined)\n}\nexport function createText(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\n}\n\nfunction vnode(vm, tag, data, children, key, text) {\n  return {\n    vm,\n    tag,\n    data,\n    children,\n    key,\n    text\n  }\n}\n","import { isObject } from './utils'\nimport { createElement, createText } from './vdom'\n\nexport function renderMixin(Vue) {\n  // 创建元素\n  Vue.prototype._c = function () {\n    const vm = this\n    return createElement(vm, ...arguments)\n  }\n  // 创建文本虚拟节点\n  Vue.prototype._v = function (text) {\n    const vm = this\n    return createText(vm, text)\n  }\n  // stringify()\n  Vue.prototype._s = function (val) {\n    if (isObject(val)) {\n      return JSON.stringify(val)\n    }\n    return val\n  }\n  Vue.prototype._render = function () {\n    const vm = this\n    const { render } = vm.$options\n    const vnode = render.call(vm)\n    return vnode\n  }\n}\n","import { initMixin } from './init'\nimport { lifecycleMixin } from './lifecycle'\nimport { renderMixin } from './render'\n\n/*\n  Vue 通过原型的模式来实现扩展的\n*/\nfunction Vue(options) {\n  // 实现 Vue 的初始化功能\n  this._init(options)\n}\n\ninitMixin(Vue)\nrenderMixin(Vue)\nlifecycleMixin(Vue)\n\nexport default Vue\n"],"names":["genProps","attrs","str","i","length","attr","name","styles","value","replace","arguments","trim","JSON","stringify","slice","gen","el","defaultTagRE","type","generate","text","test","lastIndex","tokens","match","exec","index","push","join","genChildren","children","map","item","ast","code","tag","undefined","parseHTML","html","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","stack","root","createASTElement","parent","start","element","end","pop","console","log","chars","advance","len","substring","parseStartTag","startMatch","tagName","indexOf","startTagMatch","endTagMatch","compileToFunction","template","render","Function","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","notify","forEach","w","update","isFunction","data","isObject","val","isArray","Array","callbacks","waiting","flushCallbacks","fn","nextTick","Promise","resolve","then","queue","has","pending","flushSchedulerQueue","run","queueWatcher","Watcher","vm","cb","options","depsId","Set","deps","getters","get","dep","dId","add","patch","vnode","elm","createElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","child","appendChild","createTextNode","props","key","setAttribute","mountComponent","updateComponent","_update","_render","lifecycleMixin","vue","prototype","$el","oldArrayPrototype","arrayMethods","Object","create","methods","method","args","call","inserted","ob","__ob__","observeArray","Observer","defineProperty","enumerable","__proto__","walk","observe","keys","defineReactive","dependArray","current","obj","childOb","set","newVal","initState","opts","$options","initData","_data","proxy","source","initMixin","Vue","_init","$mount","querySelector","outerHTML","$nextTick","createText","renderMixin","_c","_v","_s"],"mappings":"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"}